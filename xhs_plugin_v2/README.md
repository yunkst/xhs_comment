# 小红书网络请求监控插件 v2.4.0

一个用于监控和记录小红书网络请求的Chrome扩展插件，支持自动数据抓取和用户备注功能。

## 主要功能

### 🔍 网络请求监控
- 监控小红书网站的网络请求
- 根据后端配置的抓取规则自动抓取数据
- 将抓取的数据上传到后端系统

### 📝 历史评论查看
- 在通知页面添加"历史评论"按钮
- 查看指定用户的历史评论记录
- 支持按笔记分组显示评论

### 💬 用户备注功能
- 在每个通知旁边添加备注输入框
- 支持实时保存和状态反馈
- 备注数据持久化存储到后端

### ⚙️ 配置管理
- 可配置的后端API地址
- 支持SSO单点登录
- 从后端动态获取抓取规则

## 快速开始

### 1. 安装插件
1. 下载项目到本地
2. 打开Chrome浏览器，访问 `chrome://extensions/`
3. 开启"开发者模式"
4. 点击"加载已解压的扩展程序"，选择 `xhs_plugin_v2` 文件夹

### 2. 配置插件
1. 点击插件图标，选择"⚙️ 配置"
2. 输入后端API地址（如：`http://localhost:8000`）
3. 点击"🔐 单点登录 (SSO)"完成认证
4. 保存配置

### 3. 使用功能
- **网络监控**：访问小红书网站时自动运行
- **历史评论**：在通知页面点击红色"历史评论"按钮
- **用户备注**：在通知页面的输入框中添加备注

## 技术架构

### 核心模块
- **网络拦截器** (`fetch.js`, `xhr.js`) - 拦截网络请求
- **数据处理器** (`api-service.js`) - 处理API通信
- **通知处理器** (`notification-handler.js`) - 处理通知页面功能
- **用户备注** (`user-notes.js`) - 管理用户备注功能
- **后台服务** (`background/`) - 后台数据处理和规则管理

### 文件结构
```
xhs_plugin_v2/
├── manifest.json          # 插件配置
├── background/            # 后台脚本
├── content/               # 内容脚本
├── injected/              # 注入脚本
├── popup/                 # 弹窗页面
├── options/               # 配置页面
├── logs/                  # 日志页面
└── shared/                # 共享资源
```

## 开发调试

### 查看日志
1. 在小红书页面按F12打开开发者工具
2. 在Console中查看以下标签的日志：
   - `[XHS Plugin]` - 主插件日志
   - `[User Notes]` - 用户备注日志
   - `[API Service]` - API服务日志
   - `[Notification Handler]` - 通知处理日志

### 常见问题
- **备注输入框不显示**：确认在小红书通知页面，检查插件是否正确加载
- **备注保存失败**：检查API配置和登录状态
- **历史评论显示空白**：确认用户有历史数据，检查API连接

## 更新日志

### v2.4.0
- 🔧 优化网络请求监控性能
- 🔧 改进抓取规则匹配逻辑
- 📚 简化文档和配置

### v2.1.0
- ✨ 新增用户备注功能
- ✨ 实现智能保存机制
- ✨ 添加状态可视化反馈

### v2.0.0
- 🎉 重构插件架构
- ✨ 添加历史评论功能
- ✨ 实现动态抓取规则

## 许可证

本项目采用 MIT 许可证。

---

**注意：** 此插件仅供学习和研究使用，请遵守相关网站的使用条款。 