# 小红书监控插件配置指南

## 🎯 功能概述

本插件现在支持完全自定义的URL监控规则，您可以通过配置页面精确控制要监控的网站和请求类型。

## 🔧 如何访问配置页面

### 方法1：右键菜单
1. 右键点击插件图标
2. 选择"选项"

### 方法2：插件弹窗
1. 点击插件图标打开弹窗
2. 点击右下角的"⚙️ 配置"按钮

### 方法3：Chrome扩展管理页面
1. 打开 `chrome://extensions/`
2. 找到"小红书网络请求监控插件"
3. 点击"详细信息"
4. 点击"扩展程序选项"

## ⚙️ 配置选项说明

### 🔧 全局设置

#### 启用监控
- **作用**: 控制插件是否工作
- **关闭效果**: 完全停止所有网络请求监控

#### 启用增强拦截
- **作用**: 控制是否使用JavaScript API拦截获取完整响应内容
- **关闭效果**: 只使用WebRequest API，无法获取响应体内容

### 🌐 URL监控规则

#### 添加URL模式
支持以下格式的URL模式：

| 模式格式 | 匹配示例 | 说明 |
|---------|----------|------|
| `*.xiaohongshu.com/*` | `https://www.xiaohongshu.com/explore` | 匹配小红书所有子域名 |
| `*://edith.xiaohongshu.com/api/*` | `https://edith.xiaohongshu.com/api/sns/web/v1/user/me` | 匹配特定API |
| `*.xhscdn.com/*` | `https://sns-avatar-qc.xhscdn.com/avatar/xxx.jpg` | 匹配CDN资源 |
| `*://www.xiaohongshu.com/explore*` | `https://www.xiaohongshu.com/explore?keyword=xxx` | 匹配特定页面 |

#### 模式规则
- 使用 `*` 作为通配符
- 支持域名通配符：`*.domain.com`
- 支持协议通配符：`*://`
- 支持路径通配符：`/path/*`

#### 管理规则
- ✅ **启用/禁用**: 临时开关规则而不删除
- ❌ **删除**: 永久删除规则

### 📊 监控类型

可以选择监控哪些类型的网络请求：

- **XMLHttpRequest (AJAX)**: JavaScript发起的异步请求
- **Fetch API**: 现代的网络请求API
- **图片资源**: JPG、PNG、GIF等图片文件
- **JavaScript脚本**: JS文件加载
- **CSS样式**: 样式表文件
- **HTML文档**: 页面导航和iframe

### ⚙️ 高级设置

#### 最大记录数量
- **范围**: 100-10000条
- **作用**: 限制内存使用，超过限制时自动删除最旧记录

#### 记录请求体
- **作用**: 是否保存POST/PUT请求的请求体内容
- **注意**: 可能包含敏感信息，请谨慎开启

#### 记录响应体
- **作用**: 是否保存服务器响应的内容
- **注意**: 大响应体会影响性能和内存使用

## 💾 配置管理

### 保存配置
点击"💾 保存配置"按钮后，配置将立即生效。正在访问的页面可能需要刷新才能应用新规则。

### 恢复默认
"🔄 恢复默认"会重置所有设置为初始状态：
- 启用监控和增强拦截
- 预设小红书相关域名
- 启用所有请求类型
- 最大记录数1000条

### 导出配置
"📤 导出配置"会下载一个JSON文件，包含：
- 所有配置选项
- 导出时间戳
- 配置版本信息

### 导入配置
"📥 导入配置"可以加载之前导出的配置文件。

## 🎯 使用场景示例

### 场景1：只监控小红书主站
```
URL模式: *.xiaohongshu.com/*
监控类型: 全部启用
```

### 场景2：只监控API接口
```
URL模式: 
- *://edith.xiaohongshu.com/api/*
- *://www.xiaohongshu.com/api/*
监控类型: 只启用XMLHttpRequest和Fetch API
```

### 场景3：监控多个网站
```
URL模式:
- *.xiaohongshu.com/*
- *.weibo.com/*
- *.zhihu.com/*
监控类型: 根据需要选择
```

### 场景4：轻量级监控
```
URL模式: 根据需要配置
监控类型: 只启用XMLHttpRequest和Fetch API
高级设置: 关闭响应体记录，减少内存使用
```

## ⚠️ 注意事项

1. **权限要求**: 插件需要访问所有网站的权限才能实现自定义URL监控
2. **性能影响**: 监控大量网站或记录响应体会影响浏览器性能
3. **隐私保护**: 请谨慎配置敏感网站的监控，避免记录敏感信息
4. **配置生效**: 修改配置后，已打开的页面需要刷新才能应用新规则

## 🚀 最佳实践

1. **精准配置**: 只监控需要的网站，避免过度监控
2. **定期清理**: 定期清空日志，避免占用过多内存
3. **备份配置**: 导出重要配置以便恢复
4. **性能优化**: 关闭不需要的监控类型和响应体记录

## 🆘 故障排除

### 问题：配置后没有拦截到请求
**解决方案：**
1. 检查URL模式是否正确匹配目标网站
2. 确认全局监控开关已启用
3. 刷新目标页面重新加载脚本
4. 检查浏览器控制台是否有错误信息

### 问题：性能问题
**解决方案：**
1. 减少监控的URL模式数量
2. 关闭响应体记录
3. 降低最大记录数量
4. 只启用必要的请求类型

### 问题：配置丢失
**解决方案：**
1. 定期导出配置作为备份
2. 检查浏览器同步设置
3. 重新安装插件前先导出配置 