# 小红书通知列表获取插件修改说明

## 主要修改

1. **数据获取方式调整**：
   - 原方案：通过API方式获取数据（不可行）
   - 新方案：通过网页DOM解析方式获取数据

2. **功能优化**：
   - 简化操作流程，用户需在页面上手动切换到需要获取的通知标签
   - 增加了自动重定向功能，当不在通知页面时自动跳转

3. **UI 优化**：
   - 简洁清晰的界面设计
   - 使用分隔线增强视觉效果

## 文件变更

1. **content.js**:
   - 移除了API请求逻辑
   - 添加了DOM解析逻辑，包括提取各类通知信息
   - 添加了详细的错误处理

2. **popup.js**:
   - 优化了失败处理逻辑
   - 添加了页面重定向功能

3. **popup.html**:
   - 简化界面，保留获取和下载功能
   - 优化了UI样式

4. **测试文件**:
   - 添加了测试HTML页面，模拟小红书通知页面
   - 保存了原始通知页面，供参考和测试

## 使用方法

1. 打开小红书网站并登录
2. 在网页上手动切换到需要的通知标签
3. 点击插件图标
4. 如果未在通知页面，插件会自动跳转
5. 点击"获取通知列表"获取数据
6. 点击"下载数据"保存为JSON文件

## 注意事项

- 如果小红书页面结构发生变化，可能会导致数据获取失败
- 插件需要在小红书通知页面工作，会自动尝试跳转

## 小红书评论维护系统 - 数据获取插件更新日志

### 2024-08-01 更新
- 新增功能：在获取评论数据时自动获取和保存笔记内容
  - 笔记内容将被保存到数据库的 `notes` 集合中
  - 笔记内容包含以下信息：
    - noteId: 笔记ID
    - noteContent: 笔记文本内容
    - noteLike: 点赞数
    - noteCommitCount: 评论数
    - publishTime: 发布时间
    - authorId: 作者ID
    - title: 笔记标题
    - fetchTimestamp: 获取时间戳
  - 当点击"获取推文评论"按钮时，插件会同时提取笔记内容并发送到服务器或下载到本地

### 使用方法
1. 打开小红书任意笔记页面
2. 点击插件中的"获取推文评论"按钮
3. 插件会同时获取评论数据和笔记内容
4. 如果配置了API接口，数据会同时发送到服务器；否则会下载到本地

### 之前更新
- 实现评论区自动展开功能，支持展开所有子评论
- 优化API接口调用，增加错误处理
- 添加配置页面，可设置API接口地址和认证令牌
- 实现评论数据提取功能，支持复杂的评论嵌套结构
- 优化通知获取功能 