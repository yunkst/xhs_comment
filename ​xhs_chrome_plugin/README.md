# 小红书数据获取插件

这是一个浏览器扩展，用于获取小红书的通知列表和笔记评论数据，并支持自动展开评论区的回复。

## 功能

- **获取通知列表**：获取小红书通知页面当前活动标签页中的数据（评论和@、赞和收藏或新增关注）
- **展开所有评论 (BETA)**：在笔记页面，自动滚动加载所有评论，并尝试点击所有"展开回复"按钮。
- **获取推文评论**：获取小红书笔记页面当前加载的所有评论（包括回复）。建议先使用"展开所有评论"功能。
- **数据处理**：
    - 支持配置远程API，实现数据自动同步
    - 未配置API时，支持导出通知或评论数据为JSON格式
- 简单易用的操作界面

## 安装说明

### Chrome/Edge浏览器

1. 打开浏览器的扩展管理页面
   - Chrome: 访问 `chrome://extensions/`
   - Edge: 访问 `edge://extensions/`
2. 开启右上角的"开发者模式"
3. 点击"加载已解压的扩展程序"
4. 选择本插件的文件夹

## 使用方法

### 获取通知

1. 安装插件后，确保已登录小红书网站
2. 在小红书页面上手动切换到您想要获取的通知标签（评论和@、赞和收藏或新增关注）
3. 点击浏览器工具栏中的插件图标，打开插件界面
4. 如果您不在小红书通知页面，插件会自动帮您打开
5. 点击"获取通知列表"按钮获取当前标签下的通知数据
6. 根据API配置情况，数据会自动发送到API或下载为JSON文件

### 获取推文评论

1. 安装插件后，确保已登录小红书网站
2. 打开您想要获取评论的小红书笔记页面 (URL通常为 `https://www.xiaohongshu.com/explore/...`)
3. **重要：** 在笔记页面上向下滚动，直到所有评论（包括回复）都加载完成。
4. 点击浏览器工具栏中的插件图标，打开插件界面
5. **(推荐)** 点击"展开所有评论 (BETA)"按钮。插件将自动滚动页面加载所有评论，并尝试展开所有回复。请耐心等待此过程完成（状态栏会提示）。
6. 操作完成后（或手动滚动并展开后），点击"获取推文评论"按钮获取当前笔记下的所有已加载评论
7. 根据API配置情况，数据会自动发送到API或下载为JSON文件

### 配置远程API

1. 点击插件界面底部的"设置数据同步"链接
2. 在打开的设置页面中，填写以下信息：
   - API接口地址：完整的API URL（例如：https://api.example.com/data）
   - 认证令牌 (Token)：用于API认证的访问令牌
3. 点击"保存设置"按钮
4. 设置完成后，获取通知或评论数据时，将自动发送到配置的API

## 数据格式

### 通知数据 (JSON)

包含以下信息：
- `tabType`: 当前标签类型 ("评论和@", "赞和收藏", "新增关注")
- `userInfo`: { `id`, `name`, `avatar`, `url`, `tag` }
- `interaction`: { `type`, `time` }
- `content`: 通知内容
- `quoteContent`: 引用内容
- `extraImage`: 相关图片
- `timestamp`: 获取时间

### 评论数据 (JSON)

包含一个评论对象数组，每个评论对象包含：
- `id`: 评论ID
- `noteId`: 笔记ID (新增)
- `authorName`: 评论者昵称
- `authorUrl`: 评论者主页链接
- `authorAvatar`: 评论者头像
- `content`: 评论内容
- `repliedToUser`: 被回复用户的昵称 (如果是回复)
- `timestamp`: 评论时间
- `likeCount`: 点赞数
- `ipLocation`: IP属地
- `replies`: 回复数组，结构同父评论

### 发送到API的数据格式

发送到API的数据是一个JSON对象，包含：
- `type`: "通知" 或 "评论"
- `data`: 包含实际通知或评论数据（数组）的字段

```json
// 示例
{
  "type": "评论", 
  "data": [
    { "id": "...", "authorName": "...", /* ... 其他评论字段 ... */ "replies": [...] },
    // ...更多评论...
  ]
}
```

## 注意事项

- 使用前请确保已登录小红书账号
- **获取评论前请务必滚动页面以加载所有评论**
- 远程API需要支持POST请求和上面描述的JSON数据格式
- 插件通过网页抓取方式获取数据，不使用小红书官方API
- 如果小红书网页结构发生变化，可能会影响插件功能
- 本插件仅供学习和研究使用

## 技术说明

本插件使用以下技术实现：
- JavaScript
- Chrome Extension API
- DOM操作与网页内容提取
- Fetch API用于数据传输

## 隐私说明

- 本插件会根据配置将获取的数据发送到您指定的API接口
- 配置信息（API地址和Token）仅保存在浏览器本地，不会上传到其他地方
- 未配置API时，数据仅保存在用户本地 