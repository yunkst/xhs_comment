import{_ as B,r as b,a as k,o as E,c as N,b as a,w as o,n as j,E as m,e as r,f as M,g as y,h as u,i as _,j as F,k as K,t as g}from"./index-CJSAaRBV.js";const T={class:"user-list-container"},q={class:"table-header"},G={class:"table-operations"},H={class:"pagination-container"},J={__name:"UserListView",setup(O){const s=b({keyword:""}),p=k(!1),c=k([]),l=b({currentPage:1,pageSize:10,total:0}),i=async()=>{p.value=!0;try{const e=await j(l.currentPage,l.pageSize);e.success&&e.data?(c.value=e.data.items||[],l.total=e.data.total||0):(m.error(e.message||"获取用户列表失败"),c.value=[],l.total=0)}catch(e){console.error("获取用户列表时出错:",e),m.error("获取用户列表时出错，请查看控制台"),c.value=[],l.total=0}finally{p.value=!1}},w=e=>e?new Date(e).toLocaleString():"",C=()=>{if(m.info("当前为前端演示搜索，实际搜索需后端API支持并修改fetchUsers逻辑。"),s.keyword){const e=s.keyword.toLowerCase();c.value=c.value.filter(t=>t.id&&t.id.toLowerCase().includes(e)||t.name&&t.name.toLowerCase().includes(e))}else i()},z=()=>{s.keyword="",l.currentPage=1,i()},S=e=>{l.pageSize=e,l.currentPage=1,i()},D=e=>{l.currentPage=e,i()};return E(()=>{i()}),(e,t)=>{const L=r("el-input"),h=r("el-form-item"),f=r("el-button"),V=r("el-form"),v=r("el-card"),d=r("el-table-column"),P=r("el-avatar"),x=r("el-link"),U=r("el-table"),A=r("el-pagination"),I=M("loading");return y(),N("div",T,[a(v,{class:"search-card"},{default:o(()=>[a(V,{inline:!0,model:s,class:"search-form"},{default:o(()=>[a(h,{label:"用户ID/名称"},{default:o(()=>[a(L,{modelValue:s.keyword,"onUpdate:modelValue":t[0]||(t[0]=n=>s.keyword=n),placeholder:"搜索用户ID或名称",clearable:""},null,8,["modelValue"])]),_:1}),a(h,null,{default:o(()=>[a(f,{type:"primary",onClick:C},{default:o(()=>t[1]||(t[1]=[u("搜索")])),_:1}),a(f,{onClick:z},{default:o(()=>t[2]||(t[2]=[u("重置")])),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),a(v,{class:"table-card"},{default:o(()=>[_("div",q,[t[4]||(t[4]=_("h3",null,"小红书用户列表",-1)),_("div",G,[a(f,{onClick:i},{default:o(()=>t[3]||(t[3]=[u("刷新")])),_:1})])]),F((y(),K(U,{data:c.value,style:{width:"100%"}},{default:o(()=>[a(d,{prop:"id",label:"用户ID",width:"200"}),a(d,{label:"头像",width:"80"},{default:o(n=>[a(P,{size:40,src:n.row.avatar},{default:o(()=>t[5]||(t[5]=[_("img",{src:"https://cube.elemecdn.com/e/fd/0fc7d20532fdaf769a25683617711png.png"},null,-1)])),_:2},1032,["src"])]),_:1}),a(d,{prop:"name",label:"用户名",width:"180"}),a(d,{label:"主页链接",width:"250"},{default:o(n=>[a(x,{href:n.row.url,target:"_blank",type:"primary"},{default:o(()=>[u(g(n.row.url),1)]),_:2},1032,["href"])]),_:1}),a(d,{prop:"createdAt",label:"信息创建时间",width:"200"},{default:o(n=>[u(g(w(n.row.createdAt)),1)]),_:1}),a(d,{prop:"updatedAt",label:"信息更新时间",width:"200"},{default:o(n=>[u(g(w(n.row.updatedAt)),1)]),_:1})]),_:1},8,["data"])),[[I,p.value]]),_("div",H,[a(A,{background:"",layout:"total, sizes, prev, pager, next, jumper","current-page":l.currentPage,"page-sizes":[10,20,50,100],"page-size":l.pageSize,total:l.total,onSizeChange:S,onCurrentChange:D},null,8,["current-page","page-size","total"])])]),_:1})])}}},R=B(J,[["__scopeId","data-v-aefa4cca"]]);export{R as default};
