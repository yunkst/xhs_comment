import{_ as F,r as I,a as v,o as T,c as z,b as t,w as a,x as q,E as C,e as n,f as G,g as h,h as u,i,j as H,k as J,t as _,l as U}from"./index-B75wY2lX.js";const K={class:"xhs-user-list-container"},O={class:"table-header"},Q={class:"table-operations"},R={class:"pagination-container"},W={key:0,class:"user-detail"},Y={class:"user-basic-info"},Z={class:"user-info"},ee={key:0},te={__name:"XhsUserListView",setup(ae){const r=I({userId:"",name:""}),b=v(!1),m=v([]),l=I({currentPage:1,pageSize:10,total:0}),w=v(!1),d=v(null),p=async()=>{b.value=!0;const o={page:l.currentPage,page_size:l.pageSize};r.userId&&(o.user_id=r.userId),r.name&&(o.name=r.name);try{const e=await q.getXhsUserList(o);e&&e.data?(m.value=e.data.items,l.total=e.data.total,C.success(`成功获取 ${e.data.items.length} 条小红书用户数据`)):(C.error("获取小红书用户列表失败"),m.value=[],l.total=0)}catch(e){console.error("获取小红书用户列表时出错:",e),C.error("获取小红书用户列表时出错，请查看控制台"),m.value=[],l.total=0}finally{b.value=!1}},f=o=>o?new Date(o).toLocaleString():"",S=()=>{l.currentPage=1,p()},A=()=>{r.userId="",r.name="",l.currentPage=1,p()},P=o=>{l.pageSize=o,l.currentPage=1,p()},L=o=>{l.currentPage=o,p()},B=o=>{d.value=o,w.value=!0};return T(()=>{p()}),(o,e)=>{const k=n("el-input"),V=n("el-form-item"),g=n("el-button"),N=n("el-form"),y=n("el-card"),c=n("el-table-column"),x=n("el-avatar"),E=n("el-table"),X=n("el-pagination"),D=n("el-descriptions-item"),j=n("el-descriptions"),M=n("el-dialog"),$=G("loading");return h(),z("div",K,[t(y,{class:"search-card"},{default:a(()=>[t(N,{inline:!0,model:r,class:"search-form"},{default:a(()=>[t(V,{label:"用户ID"},{default:a(()=>[t(k,{modelValue:r.userId,"onUpdate:modelValue":e[0]||(e[0]=s=>r.userId=s),placeholder:"搜索用户ID",clearable:""},null,8,["modelValue"])]),_:1}),t(V,{label:"用户名称"},{default:a(()=>[t(k,{modelValue:r.name,"onUpdate:modelValue":e[1]||(e[1]=s=>r.name=s),placeholder:"搜索用户名称",clearable:""},null,8,["modelValue"])]),_:1}),t(V,null,{default:a(()=>[t(g,{type:"primary",onClick:S},{default:a(()=>e[3]||(e[3]=[u("搜索")])),_:1,__:[3]}),t(g,{onClick:A},{default:a(()=>e[4]||(e[4]=[u("重置")])),_:1,__:[4]})]),_:1})]),_:1},8,["model"])]),_:1}),t(y,{class:"table-card"},{default:a(()=>[i("div",O,[e[6]||(e[6]=i("h3",null,"小红书用户列表",-1)),i("div",Q,[t(g,{onClick:p},{default:a(()=>e[5]||(e[5]=[u("刷新")])),_:1,__:[5]})])]),H((h(),J(E,{data:m.value,style:{width:"100%"}},{default:a(()=>[t(c,{prop:"id",label:"用户ID",width:"200"}),t(c,{label:"头像",width:"80"},{default:a(s=>[t(x,{src:s.row.avatar,size:40,shape:"circle"},{default:a(()=>e[7]||(e[7]=[i("img",{src:"https://cube.elemecdn.com/e/fd/0fc7d20532fdaf769a25683617711png.png"},null,-1)])),_:2,__:[7]},1032,["src"])]),_:1}),t(c,{prop:"name",label:"昵称",width:"200"}),t(c,{prop:"url",label:"用户链接","min-width":"300","show-overflow-tooltip":""}),t(c,{prop:"createdAt",label:"创建时间",width:"180"},{default:a(s=>[u(_(f(s.row.createdAt)),1)]),_:1}),t(c,{prop:"updatedAt",label:"更新时间",width:"180"},{default:a(s=>[u(_(f(s.row.updatedAt)),1)]),_:1}),t(c,{label:"操作",width:"120",fixed:"right"},{default:a(s=>[t(g,{size:"small",type:"info",onClick:le=>B(s.row)},{default:a(()=>e[8]||(e[8]=[u("查看详情")])),_:2,__:[8]},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[$,b.value]]),i("div",R,[t(X,{background:"",layout:"total, sizes, prev, pager, next, jumper","current-page":l.currentPage,"page-sizes":[10,20,50,100],"page-size":l.pageSize,total:l.total,onSizeChange:P,onCurrentChange:L},null,8,["current-page","page-size","total"])])]),_:1}),t(M,{modelValue:w.value,"onUpdate:modelValue":e[2]||(e[2]=s=>w.value=s),title:"用户详情",width:"600px","destroy-on-close":""},{default:a(()=>[d.value?(h(),z("div",W,[i("div",Y,[t(x,{src:d.value.avatar,size:80,shape:"circle"},{default:a(()=>e[9]||(e[9]=[i("img",{src:"https://cube.elemecdn.com/e/fd/0fc7d20532fdaf769a25683617711png.png"},null,-1)])),_:1,__:[9]},8,["src"]),i("div",Z,[i("h3",null,_(d.value.name),1),i("p",null,"用户ID: "+_(d.value.id),1),d.value.url?(h(),z("p",ee,"用户链接: "+_(d.value.url),1)):U("",!0)])]),t(j,{title:"详细信息",column:2,border:""},{default:a(()=>[t(D,{label:"创建时间"},{default:a(()=>[u(_(f(d.value.createdAt)),1)]),_:1}),t(D,{label:"更新时间"},{default:a(()=>[u(_(f(d.value.updatedAt)),1)]),_:1})]),_:1})])):U("",!0)]),_:1},8,["modelValue"])])}}},se=F(te,[["__scopeId","data-v-09aa930d"]]);export{se as default};
