import{_ as E,r as v,a as w,o as M,c as N,b as t,w as o,P as j,E as m,e as l,f as I,g as b,h as i,i as _,j as A,k as F,t as y}from"./index-fMCleE12.js";const T={class:"user-list-container"},$={class:"table-header"},q={class:"table-operations"},G={class:"pagination-container"},H={__name:"UserListView",setup(J){const c=v({keyword:""}),p=w(!1),d=w([]),a=v({currentPage:1,pageSize:10,total:0}),s=async()=>{p.value=!0;const n={page:a.currentPage,page_size:a.pageSize,keyword:c.keyword||void 0};try{const e=await j.getUserList(n);e&&e.items?(d.value=e.items,a.total=e.total,m.success(`成功获取 ${e.items.length} 条用户数据`)):(m.error("获取用户列表失败"),d.value=[],a.total=0)}catch(e){console.error("获取用户列表时出错:",e),m.error("获取用户列表时出错，请查看控制台"),d.value=[],a.total=0}finally{p.value=!1}},k=n=>n?new Date(n).toLocaleString():"",z=()=>{a.currentPage=1,s()},C=()=>{c.keyword="",a.currentPage=1,s()},S=n=>{a.pageSize=n,a.currentPage=1,s()},P=n=>{a.currentPage=n,s()};return M(()=>{s()}),(n,e)=>{const V=l("el-input"),f=l("el-form-item"),g=l("el-button"),x=l("el-form"),h=l("el-card"),u=l("el-table-column"),D=l("el-tag"),L=l("el-table"),U=l("el-pagination"),B=I("loading");return b(),N("div",T,[t(h,{class:"search-card"},{default:o(()=>[t(x,{inline:!0,model:c,class:"search-form"},{default:o(()=>[t(f,{label:"用户名"},{default:o(()=>[t(V,{modelValue:c.keyword,"onUpdate:modelValue":e[0]||(e[0]=r=>c.keyword=r),placeholder:"搜索用户名",clearable:""},null,8,["modelValue"])]),_:1}),t(f,null,{default:o(()=>[t(g,{type:"primary",onClick:z},{default:o(()=>e[1]||(e[1]=[i("搜索")])),_:1}),t(g,{onClick:C},{default:o(()=>e[2]||(e[2]=[i("重置")])),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),t(h,{class:"table-card"},{default:o(()=>[_("div",$,[e[4]||(e[4]=_("h3",null,"系统用户列表",-1)),_("div",q,[t(g,{onClick:s},{default:o(()=>e[3]||(e[3]=[i("刷新")])),_:1})])]),A((b(),F(L,{data:d.value,style:{width:"100%"}},{default:o(()=>[t(u,{prop:"_id",label:"用户ID",width:"220"}),t(u,{prop:"username",label:"用户名",width:"180"}),t(u,{label:"状态",width:"100"},{default:o(r=>[t(D,{type:r.row.is_active?"success":"danger"},{default:o(()=>[i(y(r.row.is_active?"激活":"禁用"),1)]),_:2},1032,["type"])]),_:1}),t(u,{prop:"created_at",label:"创建时间",width:"200"},{default:o(r=>[i(y(k(r.row.created_at)),1)]),_:1})]),_:1},8,["data"])),[[B,p.value]]),_("div",G,[t(U,{background:"",layout:"total, sizes, prev, pager, next, jumper","current-page":a.currentPage,"page-sizes":[10,20,50,100],"page-size":a.pageSize,total:a.total,onSizeChange:S,onCurrentChange:P},null,8,["current-page","page-size","total"])])]),_:1})])}}},O=E(H,[["__scopeId","data-v-489d01b2"]]);export{O as default};
