<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è¯„è®ºå†…å®¹è§£ææµ‹è¯•</title>
</head>
<body>
    <h1>è¯„è®ºå†…å®¹è§£ææµ‹è¯•</h1>
    
    <!-- æ¨¡æ‹Ÿå°çº¢ä¹¦é€šçŸ¥é¡µé¢çš„ç»“æ„ -->
    <div class="main">
        <div class="info">
            <div class="user-info">
                <a href="/user/profile/65696cf50000000020033dde" class="" target="_blank">å·¦å·¦å³å³éº»éº» ğŸ¬</a>
                <span class="user-tag">ä½œè€…</span>
            </div>
            <div class="interaction-hint">
                <span>å›å¤äº†ä½ çš„è¯„è®º</span>
                <span class="interaction-time">01-14</span>
            </div>
            <div class="interaction-content">æ²¡æœ‰äººç»´æŠ¤ï¼Ÿ</div>
            <div class="quote-info">æ­å·è¿˜æ²¡åŠ¨é™<img class="note-content-emoji" crossorigin="anonymous" src="https://picasso-static.xiaohongshu.com/fe-platform/14b005f7afd5f7c88620478b610bf1de90c4ceab.png"></div>
        </div>
    </div>
    
    <hr>
    
    <div id="test-results">
        <h2>æµ‹è¯•ç»“æœï¼š</h2>
        <div id="results"></div>
    </div>

    <script>
        // å¤åˆ¶ä¿®æ”¹åçš„extractNotificationContentå‡½æ•°
        function extractNotificationContent(container) {
            // ä½¿ç”¨æ›´ç²¾ç¡®çš„é€‰æ‹©å™¨ç›´æ¥å®šä½åŒ…å«ä¸»è¦å†…å®¹ã€å¼•ç”¨å†…å®¹å’Œæç¤ºä¿¡æ¯çš„å…ƒç´ 
            const mainContent = container.querySelector('.interaction-content');
            const quoteContent = container.querySelector('.quote-info');
            const hintContent = container.querySelector('.interaction-hint');

            // è¿”å›ç»“æ„åŒ–çš„å†…å®¹å¯¹è±¡ï¼Œè€Œä¸æ˜¯æ‹¼æ¥å­—ç¬¦ä¸²
            const content = {
                main: '',           // ç”¨æˆ·çš„ä¸»è¦è¯„è®ºå†…å®¹
                quote: '',          // å¼•ç”¨/è¢«å›å¤çš„å†…å®¹
                hint: '',           // äº’åŠ¨æç¤ºä¿¡æ¯
                combined: ''        // å‘åå…¼å®¹ï¼šæ‹¼æ¥çš„å®Œæ•´å†…å®¹
            };

            // æå–ä¸»è¦è¯„è®ºæˆ–@å†…å®¹
            if (mainContent) {
                content.main = mainContent.textContent.trim();
            }

            // æå–å¼•ç”¨çš„å†…å®¹ï¼ˆä¾‹å¦‚ï¼Œå›å¤çš„å“ªæ¡è¯„è®ºï¼‰
            if (quoteContent) {
                content.quote = quoteContent.textContent.trim();
            }

            // ä»æç¤ºä¿¡æ¯ä¸­æå–åŠ¨ä½œæè¿°ï¼Œä½†æ’é™¤æ—¶é—´
            if (hintContent) {
                const hintClone = hintContent.cloneNode(true);
                const timeElement = hintClone.querySelector('.interaction-time');
                if (timeElement) {
                    timeElement.remove();
                }
                content.hint = hintClone.textContent.trim();
            }

            // æ„å»ºæ‹¼æ¥å†…å®¹ï¼ˆå‘åå…¼å®¹ï¼‰
            const contentParts = [];
            if (content.main) contentParts.push(content.main);
            if (content.quote) contentParts.push(content.quote);
            if (content.hint && contentParts.length === 0) contentParts.push(content.hint);
            
            content.combined = contentParts.join(' ');

            // è¿”å›ç»“æ„åŒ–çš„å†…å®¹å¯¹è±¡
            return content;
        }

        // æµ‹è¯•å‡½æ•°
        function testContentExtraction() {
            const container = document.querySelector('.main');
            const result = extractNotificationContent(container);
            
            const resultsDiv = document.getElementById('results');
            resultsDiv.innerHTML = `
                <h3>è§£æç»“æœï¼š</h3>
                <p><strong>ç”¨æˆ·è¯„è®ºå†…å®¹ (main):</strong> "${result.main}"</p>
                <p><strong>å¼•ç”¨å†…å®¹ (quote):</strong> "${result.quote}"</p>
                <p><strong>æç¤ºä¿¡æ¯ (hint):</strong> "${result.hint}"</p>
                <p><strong>ç»„åˆå†…å®¹ (combined):</strong> "${result.combined}"</p>
                
                <h3>åˆ†æï¼š</h3>
                <p>âœ… ç”¨æˆ·çš„è¯„è®ºå†…å®¹ï¼š"${result.main}" - æ­£ç¡®åˆ†ç¦»</p>
                <p>âœ… è¢«å›å¤çš„å†…å®¹ï¼š"${result.quote}" - æ­£ç¡®åˆ†ç¦»</p>
                <p>â„¹ï¸ ç°åœ¨å¯ä»¥å•ç‹¬ä½¿ç”¨ main å­—æ®µè·å–çº¯ç²¹çš„ç”¨æˆ·è¯„è®ºå†…å®¹</p>
                <p>â„¹ï¸ combined å­—æ®µä¿æŒå‘åå…¼å®¹ï¼š"${result.combined}"</p>
            `;
        }

        // é¡µé¢åŠ è½½å®Œæˆåæ‰§è¡Œæµ‹è¯•
        document.addEventListener('DOMContentLoaded', testContentExtraction);
    </script>
</body>
</html> 